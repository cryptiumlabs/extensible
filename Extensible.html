<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Extensible</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Extensible.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">extensible-data-0.1.0: Generate the boilerplate for the Trees That Grow pattern</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Extensible</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Name manipulation</a><ul><li><a href="#g:2">Template Haskell re-exports</a></li></ul></li><li><a href="#g:3">Generating extensible datatypes</a></li><li><a href="#section.orphans">Orphan instances</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p><a id="maindoc"></a>
 Generates an extensible datatype from a datatype declaration, roughly
 following the pattern given by the <em>Trees that Grow</em> paper by Najd and
 Peyton&#160;Jones.</p><ul><li>A type family is generated for each constructor, taking an argument named
   <code>ext</code> for the extension type, followed by the arguments of the datatype.
   The names of the type families correspond to the constructors themselves
   modified with <code><a href="Extensible.html#v:annotationName" title="Extensible">annotationName</a></code> (see <code><a href="#XVar">XVar</a></code> etc below).</li><li>An extra type family is generated with the same arguments, named after the
   datatype modified with <code><a href="Extensible.html#v:extensionName" title="Extensible">extensionName</a></code> (see <code><a href="#LamX">LamX</a></code>).</li><li>The datatype itself is renamed according to <code><a href="Extensible.html#v:datatypeName" title="Extensible">datatypeName</a></code> and given an
   extra argument called <code>ext</code> (before the others).</li><li>Each existing constructor is renamed according to <code><a href="Extensible.html#v:constructorName" title="Extensible">constructorName</a></code>, and
   given an extra strict field of the corresponding type family generated
   above.</li><li>An extra constructor is generated for the extension type family (with the
   same name), containing it as its sole field (see <code><a href="#Lam'">Lam'</a></code> for the
   transformation).</li><li>A constraint synonym is generated, named according to <code><a href="Extensible.html#v:bundleName" title="Extensible">bundleName</a></code>, which
   contains a constraint for each extension (see <code><a href="#LamAll">LamAll</a></code>).</li><li>A record and TH function are generated for creating new extensions of the
   base datatype (see <code><a href="#ExtLam">ExtLam</a></code> and <code><a href="#extendLam">extendLam</a></code>).</li><li>A standalone <code>deriving</code> declaration is generated for each derived instance
   listed.</li></ul><h1>Known bugs and shortcomings</h1><ul><li>Due to GHC's staging restriction, a Template Haskell function cannot be
   spliced in the same module as it is defined. That means it is not possible
   to write <code><code><a href="Extensible.html#v:extensible" title="Extensible">extensible</a></code> [d| data Foo = ... |]; extendFoo ...</code> within the
   same module.</li><li>When using qualified imports, the module containing <code>extendFoo</code> must be
   imported using its real name. It can also be imported using an alias if
   desired, e.g.
   <code>import qualified LongName; import qualified LongName as L</code>.</li><li>The same record label cannot be used for multiple different constructors.
   (The <code>DuplicateRecordFields</code> extension doesn't seem to lift this
   restriction with pattern synonyms.)</li><li>Pattern synonyms do not yet get type annotations, which means that GHC
   cannot always work out which variant of the type you want. You will
   probably also want to disable the warning in modules calling <code>extendFoo</code>
   until this is fixed (e.g. with
   <code>{-# OPTIONS_GHC -Wno-missing-pattern-synonym-signatures #-}</code>).</li></ul><ul><li><p>The <code>deriving</code> supported is quite limited compared to full GHC:</p><ul><li>Only <code>stock</code> and <code>anyclass</code> strategies are supported.</li><li><strong>The context is not calculated properly like a real deriving clause</strong>.
  Instead, a constraint of the given class is required for each type
  variable and each extension. If this doesn't work (e.g. you want to
  derive <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a></code> but have a type variable of kind <code><code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Kind.html#t:Type" title="Data.Kind">Type</a></code> -&gt; <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Kind.html#t:Type" title="Data.Kind">Type</a></code></code>),
  you must instead write your own declaration outside of the call to
  <code><a href="Extensible.html#v:extensible" title="Extensible">extensible</a></code>.</li><li>Deriving for non-regular datatypes (datatypes with recursive
  occurrences applied to different types) doesn't work.</li></ul></li></ul><h1>Language extensions</h1><p>The module where <code>extensible</code> is called needs the extensions
 <code>TemplateHaskell</code>, <code>TypeFamilies</code>, <code>FlexibleContexts</code>,
 <code>UndecidableInstances</code>, <code>ConstraintKinds</code>, <code>KindSignatures</code>,
 <code>StandaloneDeriving</code> to be enabled.</p><p>Modules calling <code>extendFoo</code> need <code>TemplateHaskell</code>, <code>TypeFamilies</code>,
 <code>PatternSynonyms</code>.</p><h1>Example</h1><pre>module Base where    <a id="Base"></a>
import Extensible

extensible [d| <a id="LamOrig"></a>
  data Lam a p =
      Var {varVar :: a}
    | Prim {primVal :: p}
    | App {appFun, appArg :: Lam a p}
    | Abs {absVar :: a, absBody :: Lam a p}
    deriving (Eq, Show)
  |]

====&gt;

-- type families for each constructor, and one for adding additional ones
type family XVar  ext a p    <a id="XVar"></a>
type family XPrim ext a p    <a id="XPrim"></a>
type family XApp  ext a p    <a id="XApp"></a>
type family XAbs  ext a p    <a id="XAbs"></a>
type family LamX  ext a p    <a id="LamX"></a>

data Lam' ext a p = <a id="Lam'"></a>
    Var' {                                 <a id="Var'"></a>
      varVar :: a,                         <a id="varVar"></a>
      extVar :: !(<a href="#XVar">XVar</a> ext a p)    <a id="extVar"></a>
        -- each constructor gets a slot for extra fields
    }
  | Prim' {                          <a id="Prim'"></a>
      primVal :: p,                  <a id="primVal"></a>
      extPrim :: !(XPrim ext a p)    <a id="extPrim"></a>
    }
  | App' {                                 <a id="App'"></a>
      appFun, appArg :: Lam' ext a p,      <a id="appFun"></a> <a id="appArg"></a>
        -- recursive occurrences are dealt with
      extApp :: !(<a href="#XApp">XApp</a> ext a p)    <a id="extApp"></a>
    }
  | Abs' {                                 <a id="Abs'"></a>
      absVar :: a p,                       <a id="absVar"></a>
      absBody :: Lam' ext a p,             <a id="absBody"></a>
      extAbs :: !(<a href="#XLam">XLam</a> ext a p)    <a id="extAbs"></a>
    }
  | LamX { -- a constructor for extensions      <a id="LamX"></a>
      extLam :: !(<a href="#LamX">LamX</a> ext a p)         <a id="extLam"></a>
    }

type LamAll (c :: <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Kind.html#t:Type" title="Data.Kind">Type</a></code> -&gt; <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a></code>) ext a =    <a id="LamAll"></a>
  (c (<a href="#XVar">XVar</a> ext a), c (<a href="#XPrim">XPrim</a> ext a),
   c (<a href="#XApp">XApp</a> ext a), c (<a href="#XAbs">XAbs</a> ext a),
   c (<a href="#LamX">LamX</a> ext a))

-- deriving clauses transformed to standalone deriving
deriving instance (<code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a></code>   a, <a href="#LamAll">LamAll</a> <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a></code>   ext a) =&gt; <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a></code>   (<a href="#Lam'">Lam'</a> ext a)
deriving instance (<code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Text-Show.html#t:Show" title="Text.Show">Show</a></code> a, <a href="#LamAll">LamAll</a> <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Text-Show.html#t:Show" title="Text.Show">Show</a></code> ext a) =&gt; <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Text-Show.html#t:Show" title="Text.Show">Show</a></code> (<a href="#Lam'">Lam'</a> ext a)

-- a description of an extension
-- (don't rely on the field order; use record syntax instead)
data ExtLam =                                                         <a id="ExtLam"></a>
  ExtLam {
    -- rename the Var constructor
    nameVar :: <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-String.html#t:String" title="Data.String">String</a></code>,                                              <a id="nameVar"></a>

    -- a list of extra field names and types for Var
    -- * for a non-record, this is a <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a></code> [<code><a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Lib-Internal.html#t:TypeQ" title="Language.Haskell.TH.Lib.Internal">TypeQ</a></code>] instead
    -- * <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#v:Nothing" title="GHC.Maybe">Nothing</a></code> disables the constructor
    typeVar :: <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a></code> [(<code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-String.html#t:String" title="Data.String">String</a></code>, <code><a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Lib-Internal.html#t:TypeQ" title="Language.Haskell.TH.Lib.Internal">TypeQ</a></code>)],                         <a id="typeVar"></a>

    -- same for the others
    namePrim :: <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-String.html#t:String" title="Data.String">String</a></code>, typePrim :: <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a></code> [(<code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-String.html#t:String" title="Data.String">String</a></code>, <code><a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Lib-Internal.html#t:TypeQ" title="Language.Haskell.TH.Lib.Internal">TypeQ</a></code>)],  <a id="namePrim"></a> <a id="typePrim"></a>
    nameApp  :: <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-String.html#t:String" title="Data.String">String</a></code>, typeApp  :: <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a></code> [(<code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-String.html#t:String" title="Data.String">String</a></code>, <code><a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Lib-Internal.html#t:TypeQ" title="Language.Haskell.TH.Lib.Internal">TypeQ</a></code>)],  <a id="nameApp"></a>  <a id="typeApp"></a>
    nameAbs  :: <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-String.html#t:String" title="Data.String">String</a></code>, typeAbs  :: <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a></code> [(<code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-String.html#t:String" title="Data.String">String</a></code>, <code><a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Lib-Internal.html#t:TypeQ" title="Language.Haskell.TH.Lib.Internal">TypeQ</a></code>)],  <a id="nameAbs"></a>  <a id="typeAbs"></a>

    -- extra constructors, their names &amp; fields
    -- * multiple are possible, represented with nested <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Either.html#t:Either" title="Data.Either">Either</a></code>
    -- * extensions are records because all of the proper constructors are
    -- * otherwise, has type [(<code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-String.html#t:String" title="Data.String">String</a></code>, [<code><a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Lib-Internal.html#t:TypeQ" title="Language.Haskell.TH.Lib.Internal">TypeQ</a></code>])]
    typeLamX :: [(<code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-String.html#t:String" title="Data.String">String</a></code>, [(<code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-String.html#t:String" title="Data.String">String</a></code>, <code><a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Lib-Internal.html#t:TypeQ" title="Language.Haskell.TH.Lib.Internal">TypeQ</a></code>)])]                   <a id="typeLamX"></a>
  }

-- no extensions (reproduces the input datatype)
defaultExtLam :: <a href="#ExtLam">ExtLam</a>    <a id="defaultExtLam"></a>
defaultExtLam =
  <a href="#ExtLam">ExtLam</a> {
    <a href="#nameVar">nameVar</a>  = &quot;Var&quot;,  <a href="#typeVar">typeVar</a>  = <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#v:Just" title="GHC.Maybe">Just</a></code> [],
    <a href="#namePrim">namePrim</a> = &quot;Prim&quot;, <a href="#typePrim">typePrim</a> = <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#v:Just" title="GHC.Maybe">Just</a></code> [],
    <a href="#nameApp">nameApp</a>  = &quot;App&quot;,  <a href="#typeApp">typeApp</a>  = <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#v:Just" title="GHC.Maybe">Just</a></code> [],
    <a href="#nameAbs">nameAbs</a>  = &quot;Abs&quot;,  <a href="#typeAbs">typeAbs</a>  = <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#v:Just" title="GHC.Maybe">Just</a></code> [],
    <a href="#typeLamX">typeLamX</a> = []
  }

-- produces an extended datatype; see below for details
extendLam :: <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-String.html#t:String" title="Data.String">String</a></code> -- ^ extended type's name    <a id="extendLam"></a>
          -&gt; [<code><a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Name" title="Language.Haskell.TH.Syntax">Name</a></code>] -- ^ extra type variables, if needed
          -&gt; <code><a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Lib-Internal.html#t:TypeQ" title="Language.Haskell.TH.Lib.Internal">TypeQ</a></code>  -- ^ tag for this variant of the type
                    --   (the &quot;ext&quot; parameter; should contain the above vars)
          -&gt; (<code><a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Lib-Internal.html#t:TypeQ" title="Language.Haskell.TH.Lib.Internal">TypeQ</a></code> -&gt; <code><a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Lib-Internal.html#t:TypeQ" title="Language.Haskell.TH.Lib.Internal">TypeQ</a></code> -&gt; <a href="#ExtLam">ExtLam</a>)
                    -- ^ description of extension
                    --   (input is <a href="#Lam">Lam</a>'s type variables a and p)
          -&gt; <code><a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Lib-Internal.html#t:DecsQ" title="Language.Haskell.TH.Lib.Internal">DecsQ</a></code>
extendLam = ...
</pre><h2>De Bruijn terms</h2><pre>import <a href="#Base">Base</a>

data DeBruijn    <a id="DeBruijn"></a>

<a href="#extendLam">extendLam</a> &quot;DBTerm&quot; [] [t|<a href="#DeBruijn">DeBruijn</a>|] $
  -- &quot;a&quot; and &quot;p&quot; are <a href="#Lam">Lam</a>'s type parameters
  \a p -&gt; <a href="#defaultExtLam">defaultExtLam</a> {
    <a href="#typeVar">typeVar</a> = <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#v:Nothing" title="GHC.Maybe">Nothing</a></code>, -- replaced with Free and Bound
    <a href="#typeAbs">typeAbs</a> = <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#v:Nothing" title="GHC.Maybe">Nothing</a></code>, -- replaced with a version without absVar
    <a href="#typeLamX">typeLamX</a> =
      [(&quot;Free&quot;,  [(&quot;freeVar&quot;,  a)]),
       (&quot;Bound&quot;, [(&quot;boundVar&quot;, [t|<code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a></code>|])]),
       (&quot;Abs&quot;,   [(&quot;absBody&quot;,  [t|<a href="#Lam'">Lam'</a> <a href="#DeBruijn">DeBruijn</a> $a $p|])])]
         -- (we have to say Lam' DeBruijn here because
         --  the DBTerm alias doesn't exist yet)
  }

====&gt;

type instance <a href="#XVar">XVar</a> <a href="#DeBruijn">DeBruijn</a> a p = <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Void.html#t:Void" title="Data.Void">Void</a></code>

type instance <a href="#XPrim">XPrim</a> <a href="#DeBruijn">DeBruijn</a> a p = ()
pattern Prim {primVal} = <a href="#Prim'">Prim'</a> primVal ()

type instance <a href="#XApp">XApp</a> <a href="#DeBruijn">DeBruijn</a> a p = ()
pattern App {appFun, appArg} = <a href="#App'">App'</a> appFun appArg ()

type instance <a href="#XAbs">XAbs</a> <a href="#DeBruijn">DeBruijn</a> a p = <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Void.html#t:Void" title="Data.Void">Void</a></code>

type instance LamX DeBruijn a p =
  <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Either.html#t:Either" title="Data.Either">Either</a></code> a                  -- Free
    (<code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Either.html#t:Either" title="Data.Either">Either</a></code> <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a></code>             -- Bound
       (<a href="#Lam'">Lam'</a> <a href="#DeBruijn">DeBruijn</a> a p)) -- Abs
pattern Free  {freeVar}  = <a href="#LamX">LamX</a> (<code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Either.html#v:Left" title="Data.Either">Left</a></code>         freeVar)
pattern Bound {boundVar} = <a href="#LamX">LamX</a> (<code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Either.html#v:Right" title="Data.Either">Right</a></code> (<code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Either.html#v:Left" title="Data.Either">Left</a></code>  boundVar))
pattern Abs   {absBody}  = <a href="#LamX">LamX</a> (<code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Either.html#v:Right" title="Data.Either">Right</a></code> (<code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Either.html#v:Right" title="Data.Either">Right</a></code> absBody))

{-# COMPLETE Prim, App, Free, Bound, Abs #-}
</pre><h2>Type-annotated terms</h2><pre>import <a href="#Base">Base</a>
import Extensible

data Type t =                <a id="Type"></a>
    Base t                   <a id="Base"></a>
  | Arr (Type t) (Type t)    <a id="Arr"></a>

data Typed t    <a id="Typed"></a>

do -- create a new type variable for <a href="#Typed">Typed</a>
   -- (<code><a href="Extensible.html#v:newName" title="Extensible">newName</a></code> and <code><a href="Extensible.html#v:varT" title="Extensible">varT</a></code> are reexported from TH by Extensible)
   t' &lt;- <code><a href="Extensible.html#v:newName" title="Extensible">newName</a></code> &quot;t&quot;; let t = <code><a href="Extensible.html#v:varT" title="Extensible">varT</a></code> t'
   <a href="#extendLam">extendLam</a> &quot;TypedLam&quot; [t'] [t|<a href="#Typed">Typed</a> $t|] $
     \a p -&gt; <a href="#defaultExtLam">defaultExtLam</a> {
       <a href="#typeVar">typeVar</a> = <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#v:Just" title="GHC.Maybe">Just</a></code> [(&quot;varType&quot;, [t|<a href="#Type">Type</a> $t|])],
       <a href="#typeAbs">typeAbs</a> = <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#v:Just" title="GHC.Maybe">Just</a></code> [(&quot;absArg&quot;,  [t|<a href="#Type">Type</a> $t|])],
       <a href="#typeLamX">typeLamX</a> = [(&quot;TypeAnn&quot;,
          [(&quot;annTerm&quot;, [t|<a href="#Lam'">Lam'</a> (<a href="#Typed">Typed</a> $t) $a $p|]),
           (&quot;annType&quot;, [t|<a href="#Type">Type</a> $t|])])]
     }

====&gt;

type TypedLam t = Lam' (Typed t)    <a id="TypedLam"></a>

type instance <a href="#XVar">XVar</a> (<a href="#Typed">Typed</a> t) a p = <a href="#Type">Type</a> t
pattern Var {varVar, varType} = <a href="#Var'">Var'</a> varVar varType

type instance <a href="#XPrim">XPrim</a> (<a href="#Typed">Typed</a> t) a p = ()
pattern Prim {primVal} = <a href="#Prim'">Prim'</a> primVal ()

type instance <a href="#XApp">XApp</a> (<a href="#Typed">Typed</a> t) a p = ()
pattern App {appFun, appArg} = <a href="#App'">App'</a> appFun appArg ()

type instance <a href="#XAbs">XAbs</a> (<a href="#Typed">Typed</a> t) a p = <a href="#Type">Type</a> t
pattern Abs {absVar, absBody, absArg} = <a href="#Abs'">Abs'</a> absVar absBody absArg

type instance <a href="#LamX">LamX</a> (<a href="#Typed">Typed</a> t) a p = (<a href="#Lam'">Lam'</a> (<a href="#Typed">Typed</a> t) a p, <a href="#Type">Type</a> t)
pattern TypeAnn {annTerm, annType} = <a href="#LamX">LamX</a> (annTerm, annType)

{-# COMPLETE Var, Prim, App, Abs, TypeAnn #-}
</pre></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:NameAffix">NameAffix</a> <span class="keyword">where</span><ul class="subs"><li><a href="#v:NameAffix">NameAffix</a> { <ul class="subs"><li><a href="#v:naPrefix">naPrefix</a>, <a href="#v:naSuffix">naSuffix</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-String.html#t:String" title="Data.String">String</a></li></ul> }</li><li><span class="keyword">pattern</span> <a href="#v:NamePrefix">NamePrefix</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></li><li><span class="keyword">pattern</span> <a href="#v:NameSuffix">NameSuffix</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></li></ul></li><li class="src short"><a href="#v:applyAffix">applyAffix</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a> -&gt; <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Name" title="Language.Haskell.TH.Syntax">Name</a> -&gt; <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Name" title="Language.Haskell.TH.Syntax">Name</a></li><li class="src short"><a href="#v:newName">newName</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Name" title="Language.Haskell.TH.Syntax">Name</a></li><li class="src short"><a href="#v:varT">varT</a> :: <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Name" title="Language.Haskell.TH.Syntax">Name</a> -&gt; <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Lib-Internal.html#t:TypeQ" title="Language.Haskell.TH.Lib.Internal">TypeQ</a></li><li class="src short"><a href="#v:extensible">extensible</a> :: <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Lib-Internal.html#t:DecsQ" title="Language.Haskell.TH.Lib.Internal">DecsQ</a> -&gt; <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Lib-Internal.html#t:DecsQ" title="Language.Haskell.TH.Lib.Internal">DecsQ</a></li><li class="src short"><a href="#v:extensibleWith">extensibleWith</a> :: <a href="Extensible.html#t:Config" title="Extensible">Config</a> -&gt; <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Lib-Internal.html#t:DecsQ" title="Language.Haskell.TH.Lib.Internal">DecsQ</a> -&gt; <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Lib-Internal.html#t:DecsQ" title="Language.Haskell.TH.Lib.Internal">DecsQ</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Config">Config</a> = <a href="#v:Config">Config</a> {<ul class="subs"><li><a href="#v:datatypeName">datatypeName</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></li><li><a href="#v:constructorName">constructorName</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></li><li><a href="#v:bundleName">bundleName</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></li><li><a href="#v:annotationName">annotationName</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></li><li><a href="#v:extensionName">extensionName</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></li><li><a href="#v:extensionLabel">extensionLabel</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></li><li><a href="#v:extRecordName">extRecordName</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></li><li><a href="#v:extRecTypeName">extRecTypeName</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></li><li><a href="#v:extRecNameName">extRecNameName</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></li><li><a href="#v:defExtRecName">defExtRecName</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></li><li><a href="#v:extFunName">extFunName</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></li></ul>}</li><li class="src short"><a href="#v:defaultConfig">defaultConfig</a> :: <a href="Extensible.html#t:Config" title="Extensible">Config</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Name manipulation</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:NameAffix" class="def">NameAffix</a> <a href="src/Extensible.html#NameAffix" class="link">Source</a> <a href="#t:NameAffix" class="selflink">#</a></p><div class="doc"><p>Extra strings to add to the beginning and/or end of (the base part of)
 <code><a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Name" title="Language.Haskell.TH.Syntax">Name</a></code>s</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:NameAffix" class="def">NameAffix</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:naPrefix" class="def">naPrefix</a>, <a id="v:naSuffix" class="def">naSuffix</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-String.html#t:String" title="Data.String">String</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs bundled-patterns"><p class="caption">Bundled Patterns</p><table><tr><td class="src"><span class="keyword">pattern</span> <a id="v:NamePrefix" class="def">NamePrefix</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></td><td class="doc"><p>Just a prefix, with an empty suffix</p></td></tr><tr><td class="src"><span class="keyword">pattern</span> <a id="v:NameSuffix" class="def">NameSuffix</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></td><td class="doc"><p>Just a suffix, with an empty prefix</p></td></tr></table></div><div class="subs instances"><details id="i:NameAffix" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:NameAffix:Eq:1"></span> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></span> <a href="src/Extensible.html#line-298" class="link">Source</a> <a href="#t:NameAffix" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:NameAffix:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Extensible.html">Extensible</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a> -&gt; <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a> -&gt; <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:NameAffix:Show:2"></span> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></span> <a href="src/Extensible.html#line-298" class="link">Source</a> <a href="#t:NameAffix" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:NameAffix:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Extensible.html">Extensible</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a>] -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:NameAffix:Semigroup:3"></span> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></span> <a href="src/Extensible.html#line-305" class="link">Source</a> <a href="#t:NameAffix" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:NameAffix:Semigroup:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Extensible.html">Extensible</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a> -&gt; <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a> -&gt; <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a> <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a> -&gt; <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a> <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Integral" title="Prelude">Integral</a> b =&gt; b -&gt; <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a> -&gt; <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a> <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:NameAffix:Monoid:4"></span> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></span> <a href="src/Extensible.html#line-308" class="link">Source</a> <a href="#t:NameAffix" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:NameAffix:Monoid:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Extensible.html">Extensible</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a> <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a> -&gt; <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a> -&gt; <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a> <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a>] -&gt; <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a> <a href="#v:mconcat" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:NameAffix:Lift:5"></span> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Lift" title="Language.Haskell.TH.Syntax">Lift</a> <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></span> <a href="src/Extensible.html#line-298" class="link">Source</a> <a href="#t:NameAffix" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:NameAffix:Lift:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Extensible.html">Extensible</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:lift">lift</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a> -&gt; <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp" title="Language.Haskell.TH.Syntax">Exp</a> <a href="#v:lift" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:applyAffix" class="def">applyAffix</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a> -&gt; <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Name" title="Language.Haskell.TH.Syntax">Name</a> -&gt; <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Name" title="Language.Haskell.TH.Syntax">Name</a> <a href="src/Extensible.html#applyAffix" class="link">Source</a> <a href="#v:applyAffix" class="selflink">#</a></p><div class="doc"><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>applyAffix (NameAffix &quot;pre&quot; &quot;Suf&quot;) (mkName &quot;Foo&quot;)
</code></strong>preFooSuf
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>applyAffix (NameAffix &quot;pre&quot; &quot;Suf&quot;) (mkName &quot;Foo.Bar&quot;)
</code></strong>Foo.preBarSuf
</pre></div></div><a href="#g:2" id="g:2"><h2>Template Haskell re-exports</h2></a><div class="top"><p class="src"><a id="v:newName" class="def">newName</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Name" title="Language.Haskell.TH.Syntax">Name</a> <a href="#v:newName" class="selflink">#</a></p><div class="doc"><p>Generate a fresh name, which cannot be captured.</p><p>For example, this:</p><pre>f = $(do
  nm1 &lt;- newName &quot;x&quot;
  let nm2 = <code><a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#v:mkName" title="Language.Haskell.TH.Syntax">mkName</a></code> &quot;x&quot;
  return (<code><a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#v:LamE" title="Language.Haskell.TH.Syntax">LamE</a></code> [<code><a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#v:VarP" title="Language.Haskell.TH.Syntax">VarP</a></code> nm1] (LamE [VarP nm2] (<code><a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#v:VarE" title="Language.Haskell.TH.Syntax">VarE</a></code> nm1)))
 )</pre><p>will produce the splice</p><pre>f = \x0 -&gt; \x -&gt; x0</pre><p>In particular, the occurrence <code>VarE nm1</code> refers to the binding <code>VarP nm1</code>,
and is not captured by the binding <code>VarP nm2</code>.</p><p>Although names generated by <code>newName</code> cannot <em>be captured</em>, they can
<em>capture</em> other names. For example, this:</p><pre>g = $(do
  nm1 &lt;- newName &quot;x&quot;
  let nm2 = mkName &quot;x&quot;
  return (LamE [VarP nm2] (LamE [VarP nm1] (VarE nm2)))
 )</pre><p>will produce the splice</p><pre>g = \x -&gt; \x0 -&gt; x0</pre><p>since the occurrence <code>VarE nm2</code> is captured by the innermost binding
of <code>x</code>, namely <code>VarP nm1</code>.</p></div></div><div class="top"><p class="src"><a id="v:varT" class="def">varT</a> :: <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Name" title="Language.Haskell.TH.Syntax">Name</a> -&gt; <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Lib-Internal.html#t:TypeQ" title="Language.Haskell.TH.Lib.Internal">TypeQ</a> <a href="#v:varT" class="selflink">#</a></p></div><a href="#g:3" id="g:3"><h1>Generating extensible datatypes</h1></a><div class="top"><p class="src"><a id="v:extensible" class="def">extensible</a> :: <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Lib-Internal.html#t:DecsQ" title="Language.Haskell.TH.Lib.Internal">DecsQ</a> -&gt; <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Lib-Internal.html#t:DecsQ" title="Language.Haskell.TH.Lib.Internal">DecsQ</a> <a href="src/Extensible.html#extensible" class="link">Source</a> <a href="#v:extensible" class="selflink">#</a></p><div class="doc"><p>As <code><a href="Extensible.html#v:extensibleWith" title="Extensible">extensibleWith</a></code>, using <code><a href="Extensible.html#v:defaultConfig" title="Extensible">defaultConfig</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:extensibleWith" class="def">extensibleWith</a> :: <a href="Extensible.html#t:Config" title="Extensible">Config</a> -&gt; <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Lib-Internal.html#t:DecsQ" title="Language.Haskell.TH.Lib.Internal">DecsQ</a> -&gt; <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Lib-Internal.html#t:DecsQ" title="Language.Haskell.TH.Lib.Internal">DecsQ</a> <a href="src/Extensible.html#extensibleWith" class="link">Source</a> <a href="#v:extensibleWith" class="selflink">#</a></p><div class="doc"><p>Generate an extensible datatype using the given <code><a href="Extensible.html#t:Config" title="Extensible">Config</a></code> for creating
 names. See <a href="#maindoc">the module documentation</a> for more detail on what this
 function spits out.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Config" class="def">Config</a> <a href="src/Extensible.html#Config" class="link">Source</a> <a href="#t:Config" class="selflink">#</a></p><div class="doc"><p>Configuration options for how to name the generated constructors, type
 families, etc.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Config" class="def">Config</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:datatypeName" class="def">datatypeName</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></dfn><div class="doc"><p>Applied to input datatype's name to get extensible type's name</p></div></li><li><dfn class="src"><a id="v:constructorName" class="def">constructorName</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></dfn><div class="doc"><p>Applied to input constructor names to get extensible constructor names</p></div></li><li><dfn class="src"><a id="v:bundleName" class="def">bundleName</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></dfn><div class="doc"><p>Applied to type name to get constraint bundle name</p></div></li><li><dfn class="src"><a id="v:annotationName" class="def">annotationName</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></dfn><div class="doc"><p>Appled to constructor names to get the annotation type family's name</p></div></li><li><dfn class="src"><a id="v:extensionName" class="def">extensionName</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></dfn><div class="doc"><p>Applied to datatype name to get extension constructor &amp; type family's
 name</p></div></li><li><dfn class="src"><a id="v:extensionLabel" class="def">extensionLabel</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></dfn><div class="doc"><p>If extending a record constructor, apply this to the constructor name
 to get the extension field's label.</p></div></li><li><dfn class="src"><a id="v:extRecordName" class="def">extRecordName</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></dfn><div class="doc"><p>Applied to datatype name to get extension record name</p></div></li><li><dfn class="src"><a id="v:extRecTypeName" class="def">extRecTypeName</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></dfn><div class="doc"><p>Applied to constructor names to get the names of the type fields in the
 extension record</p></div></li><li><dfn class="src"><a id="v:extRecNameName" class="def">extRecNameName</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></dfn><div class="doc"><p>Applied to constructor names to get the names of the name fields in the
 extension record (which are used to name the pattern synonyms)</p></div></li><li><dfn class="src"><a id="v:defExtRecName" class="def">defExtRecName</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></dfn><div class="doc"><p>Applied to the <code><a href="Extensible.html#v:extRecordName" title="Extensible">extRecordName</a></code> to get the name of the default extension</p></div></li><li><dfn class="src"><a id="v:extFunName" class="def">extFunName</a> :: <a href="Extensible.html#t:NameAffix" title="Extensible">NameAffix</a></dfn><div class="doc"><p>Applied to datatype name to get the name of the extension
 generator function</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:Config" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Config:Eq:1"></span> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Extensible.html#t:Config" title="Extensible">Config</a></span> <a href="src/Extensible.html#line-370" class="link">Source</a> <a href="#t:Config" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Config:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Extensible.html">Extensible</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Extensible.html#t:Config" title="Extensible">Config</a> -&gt; <a href="Extensible.html#t:Config" title="Extensible">Config</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Extensible.html#t:Config" title="Extensible">Config</a> -&gt; <a href="Extensible.html#t:Config" title="Extensible">Config</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Config:Show:2"></span> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Extensible.html#t:Config" title="Extensible">Config</a></span> <a href="src/Extensible.html#line-370" class="link">Source</a> <a href="#t:Config" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Config:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Extensible.html">Extensible</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Extensible.html#t:Config" title="Extensible">Config</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Extensible.html#t:Config" title="Extensible">Config</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Extensible.html#t:Config" title="Extensible">Config</a>] -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Config:Lift:3"></span> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Lift" title="Language.Haskell.TH.Syntax">Lift</a> <a href="Extensible.html#t:Config" title="Extensible">Config</a></span> <a href="src/Extensible.html#line-370" class="link">Source</a> <a href="#t:Config" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Config:Lift:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Extensible.html">Extensible</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:lift">lift</a> :: <a href="Extensible.html#t:Config" title="Extensible">Config</a> -&gt; <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp" title="Language.Haskell.TH.Syntax">Exp</a> <a href="#v:lift" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:defaultConfig" class="def">defaultConfig</a> :: <a href="Extensible.html#t:Config" title="Extensible">Config</a> <a href="src/Extensible.html#defaultConfig" class="link">Source</a> <a href="#v:defaultConfig" class="selflink">#</a></p><div class="doc"><p>Default config:</p><pre>Config {
  datatypeName    = NameSuffix &quot;'&quot;,
  constructorName = NameSuffix &quot;'&quot;,
  bundleName      = NameSuffix <a href="All.html">All</a>,
  annotationName  = NamePrefix &quot;X&quot;,
  extensionName   = NameSuffix &quot;X&quot;,
  extensionLabel  = NamePrefix &quot;ext&quot;,
  extRecordName   = NamePrefix &quot;Ext&quot;,
  extRecTypeName  = NamePrefix &quot;type&quot;,
  extRecNameName  = NamePrefix &quot;name&quot;,
  defExtRecName   = NamePrefix &quot;default&quot;,
  extFunName      = NamePrefix &quot;extend&quot;
}
</pre></div></div><h1>Orphan instances</h1><div id="section.orphans"><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:o:ic:Lift:Lift:1"></span> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Lift" title="Language.Haskell.TH.Syntax">Lift</a> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Name" title="Language.Haskell.TH.Syntax">Name</a></span> <a href="src/Extensible.html#line-287" class="link">Source</a> <a href="#v:-36-fLiftName" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:o:ic:Lift:Lift:1"><summary class="hide-when-js-enabled">Instance details</summary><p></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:lift">lift</a> :: <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Name" title="Language.Haskell.TH.Syntax">Name</a> -&gt; <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp" title="Language.Haskell.TH.Syntax">Exp</a> <a href="#v:lift" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:o:ic:Lift:Lift:2"></span> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Lift" title="Language.Haskell.TH.Syntax">Lift</a> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:ModName" title="Language.Haskell.TH.Syntax">ModName</a></span> <a href="src/Extensible.html#line-290" class="link">Source</a> <a href="#v:-36-fLiftModName" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:o:ic:Lift:Lift:2"><summary class="hide-when-js-enabled">Instance details</summary><p></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:lift">lift</a> :: <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:ModName" title="Language.Haskell.TH.Syntax">ModName</a> -&gt; <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp" title="Language.Haskell.TH.Syntax">Exp</a> <a href="#v:lift" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:o:ic:Lift:Lift:3"></span> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Lift" title="Language.Haskell.TH.Syntax">Lift</a> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:PkgName" title="Language.Haskell.TH.Syntax">PkgName</a></span> <a href="src/Extensible.html#line-292" class="link">Source</a> <a href="#v:-36-fLiftPkgName" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:o:ic:Lift:Lift:3"><summary class="hide-when-js-enabled">Instance details</summary><p></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:lift">lift</a> :: <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:PkgName" title="Language.Haskell.TH.Syntax">PkgName</a> -&gt; <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp" title="Language.Haskell.TH.Syntax">Exp</a> <a href="#v:lift" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:o:ic:Lift:Lift:4"></span> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Lift" title="Language.Haskell.TH.Syntax">Lift</a> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:OccName" title="Language.Haskell.TH.Syntax">OccName</a></span> <a href="src/Extensible.html#line-288" class="link">Source</a> <a href="#v:-36-fLiftOccName" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:o:ic:Lift:Lift:4"><summary class="hide-when-js-enabled">Instance details</summary><p></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:lift">lift</a> :: <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:OccName" title="Language.Haskell.TH.Syntax">OccName</a> -&gt; <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp" title="Language.Haskell.TH.Syntax">Exp</a> <a href="#v:lift" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:o:ic:Lift:Lift:5"></span> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Lift" title="Language.Haskell.TH.Syntax">Lift</a> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:NameFlavour" title="Language.Haskell.TH.Syntax">NameFlavour</a></span> <a href="src/Extensible.html#line-289" class="link">Source</a> <a href="#v:-36-fLiftNameFlavour" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:o:ic:Lift:Lift:5"><summary class="hide-when-js-enabled">Instance details</summary><p></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:lift">lift</a> :: <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:NameFlavour" title="Language.Haskell.TH.Syntax">NameFlavour</a> -&gt; <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp" title="Language.Haskell.TH.Syntax">Exp</a> <a href="#v:lift" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:o:ic:Lift:Lift:6"></span> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Lift" title="Language.Haskell.TH.Syntax">Lift</a> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:NameSpace" title="Language.Haskell.TH.Syntax">NameSpace</a></span> <a href="src/Extensible.html#line-291" class="link">Source</a> <a href="#v:-36-fLiftNameSpace" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:o:ic:Lift:Lift:6"><summary class="hide-when-js-enabled">Instance details</summary><p></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:lift">lift</a> :: <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:NameSpace" title="Language.Haskell.TH.Syntax">NameSpace</a> -&gt; <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> <a href="https://hackage.haskell.org/package/template-haskell-2.14.0.0/docs/Language-Haskell-TH-Syntax.html#t:Exp" title="Language.Haskell.TH.Syntax">Exp</a> <a href="#v:lift" class="selflink">#</a></p></div></details></td></tr></table></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>